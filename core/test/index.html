<!DOCTYPE html>
<html>
    <head><title>roguelike engine test</title></head>
    <body>
        <script type="module">
        import { RL, RLFont } from '../rl.js';
        let image = new Image();
        image.src = '../font.png';
        image.onload = () => {
          let char_data = {};
          let chars = ' 0123456789.abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!(),:/┌┐└┘│|─┤├┼┬┴╔╗╚╝║═╣╠╬╦╩#╴╶╵╷╡╞╨╥';
          for (let i = 0; i < chars.length; i++) {
            char_data[chars[i]] = { x: 10 * (i % 16), y: 10 * Math.floor(i / 16) };
          }
          let font = new RLFont(10, 10, image, char_data);
          let rl = new RL({ rows: 30, cols: 60, scale: 2, font });
          rl.logger(0, 25, 60, 5, true);
          document.body.appendChild(rl.canvas);
          rl.start_loop();
          window.rl = rl;
          window.RLFont = RLFont;
          window.font = font;
          rl.log('rl v0.0.1');
          rl.log(chars, 0xFF);
          rl.log('(!) You hear a trap activating', 0xFF_88_00);
          rl.log('╔═╗┌─┐');
          rl.log('║A║│B│');
          rl.log('╚═╝└─┘');
          rl.on('tick_end', console.warn);
          
          let panel = rl.action_panel(0, 0, 10, 25);
          window.panel = panel;
          panel.add_action('main', 'action!', 'p', () => {
            let t = Math.floor(Math.random() * 100_000).toString(16);
            panel.add_action(t, t, t[0], () => panel.remove_action(t));
          });
        }
        </script>
    </body>
</html>
